using DataFrames
using DecisionTree
using Gadfly

path = "/home/jabyte/Thesis/Training_Set/version_two_csv.csv"
train = readtable( path )

#head(train)
#describe(train)
#counts(train[:Class])
#countmap(train[:Class])
#proportions(train[:Class])
#proportionmap(train[:Class])

fts = convert(Array, train[:, 1:3])
lbs = convert(Array, train[:, 4])

#model = build_tree(lbs, fts)
model = build_forest(lbs, fts, 2, 10, 0.5, 6)
#apply_forest( model[5.9,3.0,5.1,1.9])

prt = linspace(0.1, 1.0, 5)
acc = zeros(length(prt))

for i in 1:length( prt )
    acc[i] = mean(nfoldCV_tree(lbs, fts, prt[i], 5))
end

plot(x=prt, y=acc, Geom.point, Geom.line, Guide.xlabel("Threshold"), Guide.ylabel("Accuracy"), Guide.title("Pruning Comparison"))
