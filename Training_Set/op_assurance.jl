ifile = "/home/jabyte/Thesis/Data_Sample/"
ofile = "/home/jabyte/Thesis/Data_Sample/opcode_csv_file.csv"

function get_opcodes( directory )
    opcodes = []
    try
        text = readlines( ifile )
        for ln in text
            line = string( ln )
            if length( line ) > 0 && split( line, ':' )[1] == ".text"
                index = searchindex( line, "\t" )
                if index > 0
                    line = split( line[index + 1:end]  )[1]
                    line = split( line, ";" )[1]
                    line = split( line, ":" )[1]
                    line = string( line )
                    len = length( line )
                    if len > 1 && len < 6 && ismatch( r"[a-z]*", line ) && !ismatch( r"[0-9]", line) && !ismatch( r"[A-Z]", line ) && !contains( line, "." ) && !contains( line, "-" ) && !contains( line, "_" ) && !contains( line, "?" ) && line != "align" && line != "db" && line != "dd"
                        push!( opcodes, line )
                    end
                end
            end
        end
        return opcodes
    catch err
        println( err )
        return -1
    end
end

assure = get_opcodes( directory )
println( length( opc ) )
csv_file = open( ofile, "a" )
write( csv_file, string( length( opc ) ) * ",\n" )
close( csv_file )
